<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenBB Workspace | FinvizPro</title>
    <link rel="stylesheet" href="terminal.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- TradingView Widget Script -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
</head>

<body>

    <header class="dashboard-header">
        <div class="brand">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
            </svg>
            OPENBB WORKSPACE
        </div>

        <div class="ticker-search">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" id="global-ticker-input" class="search-input" placeholder="Search ticker..."
                value="AAPL">
        </div>

        <div style="flex:1"></div>
        <a href="index.html" style="color:var(--text-gray);text-decoration:none;font-size:0.85rem">Exit Workspace</a>
    </header>

    <div class="dashboard-grid">

        <!-- 1. Ticker Info (Top Left) -->
        <div id="widget-ticker-info" class="widget">
            <div class="widget-header">
                <div class="widget-title">Ticker Information</div>
                <div
                    style="font-size:0.75rem; color:var(--text-gray); padding: 2px 6px; background:rgba(255,255,255,0.05); border-radius:4px;">
                    LIVE</div>
            </div>
            <div class="widget-content" style="padding: 16px;">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <!-- Dynamic Content -->
                <div id="ticker-header-content"></div>
                <!-- Mini Sparkline -->
                <div class="mini-chart-container">
                    <canvas id="sparkline-canvas"></canvas>
                </div>
            </div>
        </div>

        <!-- 2. Price Performance (Right - TradingView) -->
        <div id="widget-chart" class="widget">
            <div class="widget-content" style="padding:0">
                <!-- TradingView Container -->
                <div id="tradingview-container" style="height:100%; width:100%"></div>
            </div>
        </div>

        <!-- 3. Ticker Profile (Left - Below Info) -->
        <div id="widget-profile" class="widget">
            <div class="widget-header">
                <div class="widget-title">Ticker Profile</div>
            </div>
            <div class="widget-content scrollable">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div id="profile-content" class="profile-desc"></div>
            </div>
        </div>

        <!-- 4. Key Metrics -->
        <div id="widget-metrics" class="widget">
            <div class="widget-header">
                <div class="widget-title">Key Metrics</div>
            </div>
            <div class="widget-content scrollable">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div id="metrics-content"></div>
            </div>
        </div>

        <!-- 5. Share Statistics -->
        <div id="widget-stats" class="widget">
            <div class="widget-header">
                <div class="widget-title">Share Statistics</div>
            </div>
            <div class="widget-content scrollable">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div id="stats-content"></div>
            </div>
        </div>

        <!-- 6. Valuation Multiples -->
        <div id="widget-valuation" class="widget">
            <div class="widget-header">
                <div class="widget-title">Valuation Multiples</div>
                <div style="font-size:0.75rem; color:var(--text-gray);">Historical (5Y)</div>
            </div>
            <div class="widget-content">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div style="padding: 10px; height: 100%;">
                    <canvas id="valuation-canvas"></canvas>
                </div>
            </div>
        </div>

        <!-- 7. Revenue Geo -->
        <div id="widget-geo" class="widget">
            <div class="widget-header">
                <div class="widget-title">Revenue Per Geography</div>
                <div style="font-size:0.75rem; color:var(--text-gray);">Annual</div>
            </div>
            <div class="widget-content">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div style="padding: 10px; height: 100%;">
                    <canvas id="geo-canvas"></canvas>
                </div>
            </div>
        </div>

        <!-- 8. Revenue Business -->
        <div id="widget-bus" class="widget">
            <div class="widget-header">
                <div class="widget-title">Revenue Per Business Line</div>
                <div style="font-size:0.75rem; color:var(--text-gray);">Annual</div>
            </div>
            <div class="widget-content">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div style="padding: 10px; height: 100%;">
                    <canvas id="bus-canvas"></canvas>
                </div>
            </div>
        </div>

        <!-- 9. Financial Statements -->
        <div id="widget-financials" class="widget">
            <div class="widget-header">
                <div class="widget-title">Financial Statements</div>
                <div style="font-size:0.75rem; color:var(--text-gray);">Last 5 Years</div>
            </div>
            <div class="widget-content scrollable" style="padding:0">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div id="financials-table-container"></div>
            </div>
        </div>

        <!-- 8. Management Team -->
        <div id="widget-management" class="widget">
            <div class="widget-header">
                <div class="widget-title">Management Team</div>
            </div>
            <div class="widget-content scrollable" style="padding:0">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div id="management-container"></div>
            </div>
        </div>

        <!-- 9. Financial Statements (Full Width) -->
        <div id="widget-financials-full" class="widget" style="grid-column: span 4; grid-row: span 2;">
            <div class="widget-header">
                <div class="widget-title">Financial Statements</div>
                <div class="window-controls" style="display: flex; gap: 5px;">
                    <button class="nav-btn-mini active" onclick="switchFinancialTable('income', this)">Income</button>
                    <button class="nav-btn-mini" onclick="switchFinancialTable('balance', this)">Balance</button>
                    <button class="nav-btn-mini" onclick="switchFinancialTable('cash', this)">Cash Flow</button>
                </div>
            </div>
            <div class="widget-content scrollable" style="padding:0">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div id="financials-full-table-container"></div>
            </div>
        </div>

        <!-- 10. Earnings History -->
        <div id="widget-earnings" class="widget" style="grid-column: span 2; grid-row: span 2;">
            <div class="widget-header">
                <div class="widget-title">Earnings History (Reported vs Est)</div>
            </div>
            <div class="widget-content scrollable" style="padding:0">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div id="earnings-table-container"></div>
            </div>
        </div>

        <!-- 11. Dividend Payment -->
        <div id="widget-dividends" class="widget" style="grid-column: span 2; grid-row: span 2;">
            <div class="widget-header">
                <div class="widget-title">Dividend Payment</div>
            </div>
            <div class="widget-content scrollable" style="padding:0">
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
                <div id="dividends-table-container"></div>
            </div>
        </div>

        <script src="config.js"></script>
        <script src="terminal.js"></script>
</body>

</html>